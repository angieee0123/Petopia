<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Petopia • Buyer Dashboard</title>
  <meta name="description" content="Petopia Buyer Dashboard — Manage your orders, track purchases, and discover new pet products.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* --- CSS Variables and Base Styles --- */
    :root {
      --bg: #f6f8ff;
      --panel: rgba(255,255,255,.60);
      --panel-strong: rgba(255,255,255,.95);
      --text: #0b0f1a;
      --muted: #5b6378;
      --accent: #7cf4d1;
      --accent-2: #8bb6ff;
      --glass-shadow: 0 10px 30px rgba(16,24,40,.08);
      --card-radius: 12px;
      --gap: 18px;
      --ring: rgba(124, 244, 209, 0.7);
      --error: #ff6b6b;
      --success: #4ade80;
      --warning: #ffb86b;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body {
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: var(--text);
      background: var(--bg);
      line-height: 1.6;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding-left: 20px;
      padding-right: 20px;
    }
    header {
      background: var(--panel-strong);
      backdrop-filter: blur(10px);
      box-shadow: var(--glass-shadow);
      padding: 12px 0;
      position: sticky;
      top: 0;
      z-index: 99;
      width: 100%;
    }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .logo a {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }
    .logo-icon {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      display: flex;
      align-items: center;
      justify-content: center;
      color: #051014;
      font-weight: 800;
      font-size: 1.05rem;
      box-shadow: 0 6px 18px rgba(139,182,255,.09);
    }
    .logo-text {
      font-weight: 800;
      letter-spacing: 0.3px;
      color: #23272f;
      font-size: 1.05rem;
    }
    .search {
      flex: 1;
      display: flex;
      gap: 8px;
      max-width: 600px;
      align-items: center;
    }
    .search input {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(11,15,26,.06);
      background: #fff;
      color: var(--text);
      font-size: 0.95rem;
    }
    .search button {
      padding: 10px 16px;
      border: none;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #051014;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 8px 26px rgba(139,182,255,.08);
    }
    .quick-icons {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .quick-icons .icon-btn {
      position: relative;
      border: none;
      background: transparent;
      font-size: 1.05rem;
      padding: 8px;
      border-radius: 8px;
      cursor: pointer;
      color: var(--text);
      transition: color .16s ease;
    }
    .quick-icons .icon-btn:hover {
      color: var(--accent-2);
    }
    .badge {
      position: absolute;
      top: 2px;
      right: 2px;
      background: var(--accent-2);
      color: #051014;
      border-radius: 999px;
      padding: 1px 4px;
      font-weight: 800;
      font-size: 0.65rem;
      min-width: 16px;
      height: 19px; /* tinaasan mula 16px para mas kita ang icon */
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
    }
    .user-profile {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      display: flex;
      align-items: center;
      justify-content: center;
      color: #051014;
      font-weight: 700;
      font-size: 1rem;
    }
    .user-info {
      display: flex;
      flex-direction: column;
    }
    .user-name {
      font-weight: 700;
      color: var(--text);
      font-size: 0.95rem;
    }
    .user-status {
      font-size: 0.8rem;
      color: var(--muted);
    }
    .dashboard-main {
      margin: 24px auto;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: var(--gap);
      max-width: 1200px;
    }
    .sidebar {
      background: var(--panel-strong);
      backdrop-filter: blur(10px);
      border-radius: var(--card-radius);
      padding: 20px;
      box-shadow: var(--glass-shadow);
      height: fit-content;
      position: sticky;
      top: 100px;
    }
    .sidebar h3 {
      font-weight: 800;
      color: #23272f;
      font-size: 1.1rem;
      margin-bottom: 16px;
    }
    .nav-menu {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .nav-item {
      padding: 12px 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: all .16s ease;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 600;
      color: var(--text);
    }
    .nav-item:hover, .nav-item.active {
      background: rgba(139,182,255,.1);
      color: var(--accent-2);
    }
    .nav-item i {
      width: 20px;
      text-align: center;
    }
    .content-area {
      width: 100%;
      max-width: none;
      margin: 0 auto;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px; /* mas maluwag */
      margin-bottom: 24px;
    }
    .stat-card {
      background: var(--panel-strong);
      border-radius: var(--card-radius);
      box-shadow: var(--glass-shadow);
      border: 1px solid rgba(11,15,26,.06);
      padding: 22px 18px 18px 18px; /* mas malaki */
      height: 90px; /* mas mataas */
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-width: 0;
      font-size: 1.08rem;
    }
    .stat-label {
      font-size: 0.92rem;
      font-weight: 700;
      color: var(--text);
      text-align: left;
      margin-bottom: 0;
    }
    .stat-bottom {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      margin-top: auto;
    }
    .stat-value {
      font-size: 1.15rem;
      font-weight: 800;
      color: #23272f;
      text-align: left;
      line-height: 1;
    }
    .stat-icon {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      margin-bottom: 0;
      margin-left: 8px;
    }
    .section-content {
      width: 100%;
    }
    /* --- Responsive --- */
    @media (max-width: 1200px) {
      .dashboard-main { max-width: 1000px; }
    }
    @media (max-width: 900px) {
      .dashboard-main { grid-template-columns: 1fr; }
      .sidebar { position: static; }
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
      .flash-sale-card,
      .recent-orders-card {
        max-width: 100% !important;
        padding: 24px 12px !important;
      }
      .section-card,
      .recommended-products-card {
        padding: 24px 12px !important;
      }
    }
    @media (max-width: 600px) {
      .topbar { flex-direction: column; gap: 10px; }
      .dashboard-main { grid-template-columns: 1fr; }
      .stats-grid { grid-template-columns: 1fr; }
      .section-card,
      .flash-sale-card,
      .recent-orders-card,
      .recommended-products-card {
        padding: 16px 6px !important;
        border-radius: 10px !important;
      }
    }
    /* --- Section Cards --- */
    .section-card {
      background: var(--panel-strong);
      backdrop-filter: blur(10px);
      border-radius: var(--card-radius);
      padding: 32px 24px !important; /* mas malaki at consistent */
      box-shadow: var(--glass-shadow);
      border: 1px solid rgba(11,15,26,.06);
      margin-bottom: 28px;
    }
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 18px;
      padding-bottom: 6px;
      border-bottom: 1px solid #e5e8f0;
    }
    .section-title {
      font-weight: 800;
      color: #23272f;
      font-size: 1.2rem;
    }
    .view-all-btn {
      color: var(--accent-2);
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
      transition: color .16s ease;
    }
    .view-all-btn:hover { color: var(--accent); }
    /* --- Orders & Flash Sale --- */
    .order-list { display: flex; flex-direction: column; gap: 14px; }
    .order-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: rgba(139,182,255,.05);
      border-radius: 10px;
      border: 1px solid rgba(11,15,26,.04);
    }
    .order-image { width: 48px; height: 48px; border-radius: 8px; object-fit: cover; }
    .order-details { flex: 1; }
    .order-title { font-weight: 700; color: #23272f; margin-bottom: 4px; }
    .order-meta { color: var(--muted); font-size: 0.85rem; }
    .order-status {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 700;
    }
    .status-delivered { background: rgba(74,222,128,.2); color: var(--success); }
    .status-shipping { background: rgba(139,182,255,.2); color: var(--accent-2); }
    .status-processing { background: rgba(255,184,107,.2); color: var(--warning); }
    .flash-sale-card, .recent-orders-card {
      max-width: 560px !important;
      min-width: 0;
      padding: 32px 24px !important; /* mas malaki at consistent */
    }
    #flashSaleGrid {
      display: flex !important;
      flex-direction: column;
      gap: 12px;
    }
    .flash-sale-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: rgba(139,182,255,.05);
      border-radius: 10px;
      border: 1px solid rgba(11,15,26,.04);
    }
    .flash-sale-item img {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      object-fit: cover;
    }
    .flash-sale-info {
      flex: 1;
      min-width: 0;
      cursor: pointer;
    }
    .flash-sale-price {
      color: #051014 !important; /* bright red */
      font-weight: 700;
      font-size: .98rem;
    }
    .flash-sale-orig {
      text-decoration: line-through;
      color: #5b6378;
      font-size: .92rem;
      margin-left: 6px;
    }
    .flash-sale-off {
      font-size: .9rem;
      color: var(--warning);
      font-weight: 700;
      margin-left: 8px;
    }
    /* --- Recommended --- */
    .recommended-products-card {
      max-width: 100% !important;
      width: 100% !important;
      padding: 32px 24px !important;
    }
    .carousel { width: 100%; }
    .cards {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px !important;
      overflow: visible !important;
      padding: 10px 0 20px 0 !important;
      width: 100%;
    }
    .cards > .card {
      width: 100% !important;
      min-width: 0 !important;
      max-width: 100% !important;
      margin-bottom: 0 !important;
    }
    .card {
      min-width: 0 !important;
      padding: 22px 14px !important;
      font-size: 1.08rem !important;
    }
    .card img {
      height: 180px;
      object-fit: cover;
    }
    .stars { color: gold; margin: 6px 0; }
    .price { font-weight: 700; margin-top: 6px; color: #23272f; }
    .cta {
      margin-top: 6px;
      display: inline-block;
      padding: 8px 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      border-radius: 6px;
      font-weight: 700;
      text-decoration: none;
      color: #051014;
      box-shadow: 0 8px 26px rgba(139,182,255,.08);
      border: 2px solid #23272f;
      cursor: pointer;
      transition: background .16s, color .16s, border .16s;
    }
    .cta:active, .cta:focus { outline: none; }
    .cta.buy-now, .cta[style*="background:#23272f"] {
      background: #23272f !important;
      color: #fff !important;
      border: 2px solid #23272f !important;
    }
    /* --- Cart --- */
    #wishlist-section .section-card { max-width:900px;margin:0 auto; }
    /* --- Footer --- */
    footer {
      margin-top: 40px;
      padding: 18px 12px;
      background: var(--panel-strong);
      backdrop-filter: blur(10px);
      box-shadow: var(--glass-shadow);
    }
    .footer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
      gap: var(--gap);
    }
    footer h4 {
      margin-bottom: 10px;
      font-size: 0.95rem;
      color: var(--accent-2);
      font-weight: 700;
    }
    footer ul {
      list-style: none;
      padding: 0;
      display: grid; gap: 6px;
    }
    footer a { 
      text-decoration: none; 
      color: var(--text); 
      font-weight: 600;
      transition: color .16s ease;
    }
    footer a:hover { color: var(--accent-2); }
    footer p {
      margin-top: 10px;
      color: var(--muted);
      font-size: 0.85rem;
      font-weight: 600;
    }
    #flashCountdown {
      color: #ff3b3b !important; /* bright red */
      font-weight: 700;
    }


    #wishlist-section {
      width: 100%;
      display: flex;
      justify-content: center;
    }

    #wishlist-section .section-card {
      width: 100%;
      max-width: 1100px;
      min-width: 0;
      margin: 0 auto;
      box-sizing: border-box;
      padding: 40px 40px 32px 40px !important;
      background: var(--panel-strong);
      border-radius: var(--card-radius);
      box-shadow: var(--glass-shadow);
      border: 1px solid rgba(11,15,26,.06);
    }

    /* Responsive adjustment for smaller screens */
    @media (max-width: 1200px) {
      #wishlist-section .section-card {
        max-width: 1000px;
        padding: 32px 16px 28px 16px !important;
      }
    }
    @media (max-width: 900px) {
      #wishlist-section .section-card {
        max-width: 100%;
        padding: 24px 8px !important;
      }
    }
  </style>
</head>
<body>
  <header role="banner" aria-label="Main header">
    <div class="topbar">
      <div class="logo" aria-label="Petopia logo">
        <a href="index.html">
          <div class="logo-icon">P</div>
          <div class="logo-text">Petopia</div>
        </a>
      </div>
      <div class="search" role="search" aria-label="Search products">
        <input id="searchInput" type="search" placeholder="Search your orders, products..." aria-label="Search" />
        <button aria-label="Search button">Search</button>
        <div class="quick-icons">
          <button class="icon-btn" aria-label="Cart">
            <i class="fa-solid fa-cart-shopping"></i><span id="cartBadge" class="badge" aria-live="polite">0</span>
          </button>
          <button class="icon-btn" aria-label="Notifications"><i class="fa-regular fa-bell"></i><span class="badge">2</span></button>
          <button class="icon-btn" aria-label="Messages">
            <i class="fa-regular fa-envelope"></i>
          </button>        
        </div>
      </div>
      <div class="user-profile">
        <div class="user-avatar">JD</div>
        <div class="user-info">
          <div class="user-name">John Doe</div>
          <div class="user-status">Premium Member</div>
        </div>
      </div>
    </div>
  </header>
  <main class="dashboard-main" role="main">
    <aside class="sidebar">
      <h3>Dashboard</h3>
      <ul class="nav-menu">
        <li class="nav-item active" data-section="overview">
          <i class="fa-solid fa-chart-line"></i>
          Overview
        </li>
        <li class="nav-item" data-section="orders">
          <i class="fa-solid fa-box"></i>
          My Orders
        </li>
        <li class="nav-item" data-section="wishlist">
          <i class="fa-solid fa-cart-shopping"></i>
          Cart
        </li>
        <li class="nav-item" data-section="profile">
          <i class="fa-solid fa-user"></i>
          Profile
        </li>
        <li class="nav-item" data-section="addresses">
          <i class="fa-solid fa-location-dot"></i>
          Addresses
        </li>
        <li class="nav-item" data-section="payments">
          <i class="fa-solid fa-credit-card"></i>
          Payment Methods
        </li>
        <li class="nav-item" data-section="settings">
          <i class="fa-solid fa-gear"></i>
          Settings
        </li>
      </ul>
    </aside>
    <div class="content-area" style="width:100%;max-width:none;margin:0 auto;">
      <div id="overview-section" class="section-content">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">To Pay</div>
            <div class="stat-bottom">
              <span class="stat-value">2</span>
              <span class="stat-icon" style="background: rgba(255,184,107,.2); color: var(--warning);">
                <i class="fa-solid fa-wallet"></i>
              </span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-label">To Ship</div>
            <div class="stat-bottom">
              <span class="stat-value">1</span>
              <span class="stat-icon" style="background: rgba(139,182,255,.2); color: var(--accent-2);">
                <i class="fa-solid fa-truck-arrow-right"></i>
              </span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-label">To Receive</div>
            <div class="stat-bottom">
              <span class="stat-value">3</span>
              <span class="stat-icon" style="background: rgba(124,244,209,.2); color: var(--accent);">
                <i class="fa-solid fa-box-open"></i>
              </span> 
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Completed</div>
            <div class="stat-bottom">
              <span class="stat-value">12</span>
              <span class="stat-icon" style="background: rgba(124,244,209,.2); color: var(--success);">
                <i class="fa-solid fa-circle-check"></i>
              </span>
            </div>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; align-items: flex-start;">
          <div class="section-card recent-orders-card">
            <div class="section-header">
              <h3 class="section-title">Recent Orders</h3>
              <a href="#" class="view-all-btn">View All Orders</a>
            </div>
            <div class="order-list">
              <div class="order-item">
                <img class="order-image" src="https://via.placeholder.com/60x60?text=Order+1" alt="Order 1">
                <div class="order-details">
                  <div class="order-title">Healthy Dog Treats</div>
                  <div class="order-meta">Order #12345 • 2 days ago</div>
                </div>
                <span class="order-status status-delivered">Delivered</span>
              </div>
              <div class="order-item">
                <img class="order-image" src="https://via.placeholder.com/60x60?text=Order+2" alt="Order 2">
                <div class="order-details">
                  <div class="order-title">Cozy Cat Bed</div>
                  <div class="order-meta">Order #12346 • 1 day ago</div>
                </div>
                <span class="order-status status-shipping">Shipping</span>
              </div>
              <div class="order-item">
                <img class="order-image" src="https://via.placeholder.com/60x60?text=Order+3" alt="Order 3">
                <div class="order-details">
                  <div class="order-title">Pet Shampoo</div>
                  <div class="order-meta">Order #12347 • Today</div>
                </div>
                <span class="order-status status-processing">Processing</span>
              </div>
            </div>
          </div>
          <div class="section-card flash-sale-card" style="max-width:500px;width:100%;margin-left:0;margin-right:auto;padding:18px 14px;">
            <div class="section-header">
              <h3 class="section-title">Flash Sale</h3>
              <span id="flashCountdown" style="font-size:0.95rem;color:var(--muted);font-weight:600;"></span>
            </div>
            <div id="flashSaleGrid"></div>
          </div>
        </div>
        <div class="section-card recommended-products-card" style="max-width:100%;">
          <div class="section-header">
            <h3 class="section-title">Recommended for You</h3>
          </div>
          <div class="carousel" style="width:100%;">
            <div
              class="cards"
              id="recommendedCards"
              tabindex="0"
              aria-label="Recommended products"
              style="display: grid; grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); gap: 20px; overflow: visible; padding: 10px 0 20px 0;">
            </div>
          </div>
        </div>
      </div>
      <div id="orders-section" class="section-content" style="display:none;">
        <div class="section-card" style="max-width:900px;margin:0 auto;">
          <div class="section-header" style="flex-wrap:wrap;gap:12px;">
            <h3 class="section-title">My Orders</h3>
            <div id="orderFilters" style="display:flex;gap:8px;flex-wrap:wrap;">
              <button class="order-filter-btn active" data-status="All" style="padding:6px 16px;border-radius:6px;border:none;background:#8bb6ff;color:#fff;font-weight:700;cursor:pointer;">All</button>
              <button class="order-filter-btn" data-status="To Pay" style="padding:6px 16px;border-radius:6px;border:none;background:#e5e8f0;color:#23272f;font-weight:700;cursor:pointer;">To Pay</button>
              <button class="order-filter-btn" data-status="To Ship" style="padding:6px 16px;border-radius:6px;border:none;background:#e5e8f0;color:#23272f;font-weight:700;cursor:pointer;">To Ship</button>
              <button class="order-filter-btn" data-status="To Receive" style="padding:6px 16px;border-radius:6px;border:none;background:#e5e8f0;color:#23272f;font-weight:700;cursor:pointer;">To Receive</button>
              <button class="order-filter-btn" data-status="Completed" style="padding:6px 16px;border-radius:6px;border:none;background:#e5e8f0;color:#23272f;font-weight:700;cursor:pointer;">Completed</button>
            </div>
          </div>
          <div id="ordersList"></div>
        </div>
      </div>
      <div id="wishlist-section" class="section-content" style="display:none;">
        <div class="section-card" style="width:100%;max-width:900px;margin:0 auto;padding:32px 32px 28px 32px;box-sizing:border-box;">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h3 class="section-title" style="margin-bottom:18px;">Your Cart</h3>
            <button id="editCartBtn" type="button" style="background:none;border:none;cursor:pointer;font-size:1rem;display:flex;align-items:center;gap:6px;color:#23272f;">
              <i class="fa-solid fa-pen-to-square"></i> Edit
            </button>
          </div>
          <form>
            <div style="margin-bottom:12px;">
              <input type="checkbox" id="selectAllCart" style="transform:scale(1.2);margin-right:8px;">
              <label for="selectAllCart" style="font-weight:600;color:#23272f;">Select All</label>
            </div>
            <div id="cartItems"></div>
            <div id="cartEmpty" style="color:var(--muted);text-align:center;padding:40px;display:none;">Your cart is empty.</div>
            <!-- Palitan ang Delete button markup para naka-hide by default -->
            <div style="margin-bottom:16px;">
              <button type="button" id="deleteSelectedBtn" class="cta" style="background:#ff6b6b;color:#fff;border:2px solid #ff6b6b;min-width:120px;display:none;">Delete</button>
            </div>
            <div style="margin-top:24px;display:flex;justify-content:space-between;align-items:center;">
              <div style="font-weight:700;font-size:1.1rem;">
                Total: <span id="cartTotal" style="color:var(--accent-2);">₱0</span>
              </div>
              <button type="button" id="checkoutBtn" class="cta buy-now" style="min-width:140px;">Checkout</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>
  <footer role="contentinfo">
    <div class="container">
      <div class="footer-grid">
        <div>
          <h4>Customer Service</h4>
          <ul>
            <li><a href="#">Help Center</a></li>
            <li><a href="#">Track Order</a></li>
            <li><a href="#">Returns & Refunds</a></li>
          </ul>
        </div>
        <div>
          <h4>About</h4>
          <ul>
            <li><a href="#">About Petopia</a></li>
            <li><a href="#">Careers</a></li>
            <li><a href="#">Blog</a></li>
          </ul>
        </div>
        <div>
          <h4>Download App</h4>
          <p>
            <a href="#">
              <img alt="App Store" src="https://upload.wikimedia.org/wikipedia/commons/6/67/App_Store_%28iOS%29.svg" style="height:32px;vertical-align:middle;margin-right:8px;" loading="lazy">
            </a>
            <a href="#">
              <img alt="Google Play" src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" style="height:32px;vertical-align:middle;" loading="lazy">
            </a>
          </p>
        </div>
        <div>
          <h4>Follow Us</h4>
          <p>
            <a href="#">
              <img alt="Facebook" src="https://cdn-icons-png.flaticon.com/512/733/733547.png" style="height:28px;vertical-align:middle;margin-right:6px;">
            </a>
            <a href="#">
              <img alt="Instagram" src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" style="height:28px;vertical-align:middle;margin-right:6px;">
            </a>
            <a href="#">
              <img alt="X (Twitter)" src="https://cdn-icons-png.flaticon.com/512/5968/5968958.png" style="height:28px;vertical-align:middle;">
            </a>
          </p>
        </div>
      </div>
      <p style="margin-top:12px;color:var(--muted);font-size:.9rem">© <span id="yr"></span> Petopia. All rights reserved.</p>
    </div>
  </footer>
  <!-- Product Modal -->
  <div id="productModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:999;background:rgba(0,0,0,.25);backdrop-filter:blur(2px);align-items:center;justify-content:center;">
    <div id="modalContent" style="background:rgba(255,255,255,.97);border-radius:18px;max-width:820px;width:96vw;min-height:420px;display:flex;box-shadow:0 10px 40px rgba(16,24,40,.22);position:relative;overflow:hidden;">
      <!-- Product details will be injected here -->
    </div>
  </div>
  <script>
    // Footer year auto-update
    document.getElementById('yr').textContent = new Date().getFullYear();

    // Navigation functionality
    const navItems = document.querySelectorAll('.nav-item');
    const sections = document.querySelectorAll('.section-content');
    navItems.forEach(item => {
      item.addEventListener('click', () => {
        navItems.forEach(nav => nav.classList.remove('active'));
        item.classList.add('active');
        sections.forEach(section => section.style.display = 'none');
        const sectionId = item.dataset.section + '-section';
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
          targetSection.style.display = 'block';
        }
        // Show overview-section by default if not found
        if (!targetSection && document.getElementById('overview-section')) {
          document.getElementById('overview-section').style.display = 'block';
        }
      });
    });

    // --- FLASH SALE DATA ---
    const flashSaleProducts = [
      {
        id: 101,
        title: "Premium Dog Food 5kg",
        price: "₱899",
        orig: "₱1,299",
        off: "31% OFF",
        img: "https://via.placeholder.com/400x300?text=Dog+Food"
      },
      {
        id: 102,
        title: "Cat Litter 10L",
        price: "₱349",
        orig: "₱499",
        off: "30% OFF",
        img: "https://via.placeholder.com/400x300?text=Cat+Litter"
      },
      {
        id: 103,
        title: "Pet Shampoo 500ml",
        price: "₱199",
        orig: "₱299",
        off: "33% OFF",
        img: "https://via.placeholder.com/400x300?text=Pet+Shampoo"
      },
      {
        id: 104,
        title: "Chew Toy Set",
        price: "₱299",
        orig: "₱499",
        off: "40% OFF",
        img: "https://via.placeholder.com/400x300?text=Chew+Toy"
      }
    ];

    function renderFlashSaleOverview() {
      const grid = document.getElementById('flashSaleGrid');
      if (!grid) return;
      grid.innerHTML = '';
      flashSaleProducts.slice(0, 3).forEach(p => {
        const div = document.createElement('div');
        div.className = 'flash-sale-item';
        div.innerHTML = `
          <img src="${p.img}" alt="${p.title}">
          <div class="flash-sale-info" style="flex:1;min-width:0;cursor:pointer;">
            <div style="font-weight:700;font-size:.97rem;color:#23272f;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${p.title}</div>
            <div>
              <span class="flash-sale-price">${p.price}</span>
              <span class="flash-sale-orig">${p.orig}</span>
              <span class="flash-sale-off">${p.off}</span>
            </div>
          </div>
          <button class="cta" onclick="addToCart(${p.id})">Add to Cart</button>
        `;
        // Add click event for popup details
        div.querySelector('.flash-sale-info').onclick = () => showProductModal(p);
        grid.appendChild(div);
      });
    }
    renderFlashSaleOverview();

    // Flash Sale countdown (next hour)
    function startFlashCountdown() {
      const el = document.getElementById('flashCountdown');
      if (!el) return;
      function tick() {
        const now = new Date();
        const next = new Date(now);
        next.setHours(now.getHours() + 1, 0, 0, 0);
        let diff = Math.max(0, Math.floor((next - now) / 1000));
        const h = String(Math.floor(diff / 3600)).padStart(2, '0');
        diff %= 3600;
        const m = String(Math.floor(diff / 60)).padStart(2, '0');
        const s = String(diff % 60).padStart(2, '0');
        el.textContent = `Ends in ${h}:${m}:${s}`;
      }
      tick();
      setInterval(tick, 1000);
    }
    startFlashCountdown();

    // --- RECOMMENDED PRODUCTS DATA ---
    function getAllProducts() {
      // Sample static data, palitan mo ito ng real data kung meron
      return [
        {
          id: 1,
          title: "Healthy Dog Treats",
          price: "₱299",
          rating: 4.6,
          img: "https://via.placeholder.com/400x400?text=Dog+Treats",
          desc: "High-quality treats for your dog. Grain-free, all-natural, and vet-approved. Perfect for training and rewarding your furry friend.",
          reviews: [
            { user: "Maria", stars: 5, comment: "My dog loves these treats!" },
            { user: "Paolo", stars: 4, comment: "Good value for money." }
          ]
        },
        {
          id: 2,
          title: "Cozy Cat Bed",
          price: "₱599",
          rating: 4.7,
          img: "https://via.placeholder.com/400x400?text=Cat+Bed",
          desc: "Soft and comfortable bed for cats. Machine-washable and non-slip bottom. Your cat will sleep soundly!",
          reviews: [
            { user: "John", stars: 4, comment: "Very comfy for my cat." }
          ]
        },
        ...flashSaleProducts // include flash sale products in recommended
      ];
    }

    function renderRecommendedAll() {
      const allProducts = getAllProducts();
      const el = document.getElementById('recommendedCards');
      el.innerHTML = '';
      allProducts.forEach((p, idx) => {
        const card = document.createElement('article'); card.className='card';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.title}" loading="lazy">
          <div style="margin-top:8px;font-size:.95rem">${p.title}</div>
          <div class="stars">${'★'.repeat(Math.round(p.rating||4))}</div>
          <div class="price">${p.price}</div>
          <div><button class="cta" onclick="addToCart(${p.id})">Add to Cart</button></div>
        `;
        card.onclick = (e) => {
          if (e.target.tagName === 'BUTTON') return;
          showProductModal(p);
        };
        el.appendChild(card);
      });
    }
    renderRecommendedAll();

    // Search functionality
    document.querySelector('.search button').addEventListener('click', function(e) {
      e.preventDefault();
      searchRecommended();
    });
    document.getElementById('searchInput').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        searchRecommended();
      }
    });
    document.getElementById('searchInput').addEventListener('input', function() {
      if (!this.value.trim()) {
        renderRecommendedAll();
      }
    });

    function searchRecommended() {
      // Switch to Overview section if not visible
      document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
      const overviewNav = document.querySelector('.nav-item[data-section="overview"]');
      if (overviewNav) overviewNav.classList.add('active');
      document.querySelectorAll('.section-content').forEach(section => section.style.display = 'none');
      const overviewSection = document.getElementById('overview-section');
      if (overviewSection) overviewSection.style.display = 'block';

      // Scroll to Recommended for You section
      const recommendedSection = document.querySelector('.section-card.recommended-products-card');
      if (recommendedSection) recommendedSection.scrollIntoView({ behavior: 'smooth' });

      // Filter products
      const q = document.getElementById('searchInput').value.toLowerCase();
      const allProducts = getAllProducts();
      if (!q.trim()) {
        renderRecommendedAll();
        return;
      }
      const filtered = allProducts.filter(p =>
        p.title.toLowerCase().includes(q)
      );
      const el = document.getElementById('recommendedCards');
      el.innerHTML = '';
      filtered.forEach(p => {
        const card = document.createElement('article'); card.className='card';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.title}" loading="lazy">
          <div style="margin-top:8px;font-size:.95rem">${p.title}</div>
          <div class="stars">${'★'.repeat(Math.round(p.rating||4))}</div>
          <div class="price">${p.price}</div>
          <div><button class="cta" onclick="addToCart(${p.id})">Add to Cart</button></div>
        `;
        card.onclick = (e) => {
          if (e.target.tagName === 'BUTTON') return;
          showProductModal(p);
        };
        el.appendChild(card);
      });
    }

    // Product Modal
    function showProductModal(product) {
      let modal = document.getElementById('productModal');
      if (!modal) {
        modal = document.createElement('div');
        modal.id = 'productModal';
        modal.style = 'display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:999;background:rgba(0,0,0,.25);backdrop-filter:blur(2px);align-items:center;justify-content:center;';
        modal.innerHTML = `<div id="modalContent" style="background:rgba(255,255,255,.97);border-radius:18px;max-width:820px;width:96vw;min-height:420px;display:flex;box-shadow:0 10px 40px rgba(16,24,40,.22);position:relative;overflow:hidden;"></div>`;
        document.body.appendChild(modal);
      }
      const content = modal.querySelector('#modalContent');
      const percent = product.rating ? Math.round((product.rating/5)*100) : 0;

      function getProfileImg(username) {
        return `https://ui-avatars.com/api/?name=${encodeURIComponent(username)}&background=8bb6ff&color=fff&size=48`;
      }
      function renderStars(rating) {
        let html = '';
        for (let i = 1; i <= 5; i++) {
          html += `<span style="font-size:1.25rem;vertical-align:middle;color:${i <= Math.round(rating) ? 'gold' : '#e5e8f0'};">&#9733;</span>`;
        }
        return html;
      }
      function renderStarsByPercent(percent) {
        let html = '';
        let fullStars = Math.floor(percent / 20);
        let partial = (percent % 20) / 20;
        for (let i = 1; i <= 5; i++) {
          if (i <= fullStars) {
            html += `<span style="font-size:1.25rem;vertical-align:middle;color:gold;">&#9733;</span>`;
          } else if (i === fullStars + 1 && partial > 0) {
            html += `<span style="font-size:1.25rem;vertical-align:middle;
              background: linear-gradient(90deg, gold ${partial*100}%, #e5e8f0 ${partial*100}%);
              -webkit-background-clip: text; -webkit-text-fill-color: transparent; color:gold;">&#9733;</span>`;
          } else {
            html += `<span style="font-size:1.25rem;vertical-align:middle;color:#e5e8f0;">&#9733;</span>`;
          }
        }
        return html;
      }

      let reviewsHtml = '';
      if (product.reviews && product.reviews.length) {
        reviewsHtml = `
          <div id="reviewsList" style="max-height:180px;overflow-y:auto;padding-right:6px;
            background:rgba(139,182,255,0.10);border-radius:10px;padding:16px 10px;margin-bottom:18px;">
            ${product.reviews.map(r => `
              <div style="display:flex;align-items:flex-start;gap:10px;margin-bottom:14px;">
                <img src="${getProfileImg(r.user)}" alt="${r.user}" style="width:38px;height:38px;border-radius:50%;object-fit:cover;box-shadow:0 2px 8px #eee;">
                <div>
                  <div style="font-weight:700;color:#23272f;font-size:.97rem;">
                    ${r.user}
                    ${renderStars(r.stars)}
                  </div>
                  <div style="color:#5b6378;font-size:.97rem;">${r.comment}</div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
      } else {
        reviewsHtml = `<div style="color:#5b6378;background:rgba(139,182,255,0.10);border-radius:10px;padding:16px 10px;margin-bottom:18px;">No reviews yet.</div>`;
      }

      content.innerHTML = `
        <button id="closeModal" style="position:absolute;top:16px;right:18px;background:none;border:none;font-size:2rem;cursor:pointer;z-index:2;">&times;</button>
        <div style="flex:1 1 340px;min-width:320px;max-width:370px;padding:32px 28px 32px 32px;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;position:relative;">
          <!-- SHOP INFO ON TOP -->
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:16px;">
            <img src="${product.shopImg || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(product.shop || 'Shop') + '&background=8bb6ff&color=fff&size=48'}" alt="${product.shop || 'Shop'}" style="width:38px;height:38px;border-radius:50%;object-fit:cover;box-shadow:0 2px 8px #eee;">
            <span style="font-weight:700;color:#23272f;font-size:1.05rem;">${product.shop || 'Shop Name'}</span>
          </div>
          <img src="${product.img}" alt="${product.title}" style="width:100%;max-width:400px;height:270px;object-fit:cover;border-radius:12px;box-shadow:0 2px 12px #e5e8f0;">
          <h2 style="margin:18px 0 8px 0;font-size:1.35rem;font-weight:800;color:#23272f;">${product.title}</h2>
          <div id="modalDesc" style="margin-bottom:10px;color:#23272f;font-size:1.05rem;">
            ${
              (() => {
                if (!product.desc) return 'No description available.';
                const words = product.desc.split(' ');
                if (words.length <= 20) return product.desc;
                const shortDesc = words.slice(0, 20).join(' ') + '... ';
                return `${shortDesc}<a href="#" id="seeAllDesc" style="color:var(--accent-2);font-weight:600;text-decoration:underline;cursor:pointer;">See all</a>`;
              })()
            }
          </div>
          <div style="font-weight:800;color:#23272f;font-size:1.18rem;margin-bottom:8px;">
            ${product.price}
          </div>
        </div>
        <div style="flex:1 1 340px;min-width:320px;max-width:370px;padding:32px 32px 32px 18px;display:flex;flex-direction:column;justify-content:flex-start;position:relative;">
          <div style="margin-bottom:18px;">
            <div style="display:flex;align-items:center;gap:14px;margin-bottom:8px;">
              <span style="font-size:1.25rem;font-weight:700;color:#23272f;">${product.rating ? product.rating + ' / 5.0' : ''}</span>
              ${renderStarsByPercent(percent)}
              <span style="font-size:1.05rem;color:#5b6378;">(${percent}%)</span>
            </div>
            <div style="height:10px;background:#e5e8f0;border-radius:6px;overflow:hidden;width:100%;max-width:400px;">
              <div style="width:${percent}%;height:100%;background:linear-gradient(90deg,#7cf4d1,#8bb6ff);"></div>
            </div>
          </div>
          ${reviewsHtml}
          <div style="position:absolute;bottom:32px;left:32px;right:32px;display:flex;gap:16px;justify-content:center;">
            <button class="cta" style="flex:1;max-width:260px;" onclick="addToCart(${product.id})">Add to Cart</button>
            <button class="cta buy-now" style="flex:1;max-width:260px;" onclick="alert('Proceed to checkout for product: ${product.title}')">Buy Now</button>
          </div>
        </div>
      `;
      modal.style.display = 'flex';
      document.getElementById('closeModal').onclick = () => { modal.style.display = 'none'; };
      modal.onclick = function(e) { if(e.target === this) this.style.display = 'none'; };

      // See all description
      if (product.desc && product.desc.split(' ').length > 20) {
        const seeAll = document.getElementById('seeAllDesc');
        if (seeAll) {
          seeAll.onclick = function(e) {
            e.preventDefault();
            document.getElementById('modalDesc').innerHTML = product.desc;
          };
        }
      }
    }

    // --- MY ORDERS DATA & RENDER ---
    const userOrders = [
      {
        orderId: 'A1001',
        date: '2025-09-20',
        status: 'To Pay',
        items: [
          { title: 'Healthy Dog Treats', qty: 2, price: '₱299', img: '...', variation: 'Small' }
          // ... more items
        ]
      },
      {
        orderId: 'A1002',
        date: '2025-09-15',
        status: 'To Ship',
        items: [
          { title: 'Premium Dog Food 5kg', qty: 1, price: '₱899', img: 'https://via.placeholder.com/60x60?text=Dog+Food' }
        ]
      },
      {
        orderId: 'A1003',
        date: '2025-09-10',
        status: 'To Receive',
        items: [
          { title: 'Pet Shampoo 500ml', qty: 3, price: '₱199', img: 'https://via.placeholder.com/60x60?text=Shampoo' }
        ]
      },
      {
        orderId: 'A1004',
        date: '2025-09-05',
        status: 'Completed',
        items: [
          { title: 'Cat Litter 10L', qty: 2, price: '₱349', img: 'https://via.placeholder.com/60x60?text=Cat+Litter' }
        ]
      }
    ];

    function renderOrders(filter = 'All') {
      const ordersList = document.getElementById('ordersList');
      if (!ordersList) return;
      let filtered = filter === 'All' ? userOrders : userOrders.filter(o => o.status === filter);
      if (!filtered.length) {
        ordersList.innerHTML = '<div style="color:var(--muted);text-align:center;padding:40px;">No orders found.</div>';
        return;
      }
      ordersList.innerHTML = filtered.map(order => `
        <div class="order-block" style="border:1px solid #e5e8f0;border-radius:10px;padding:0;margin-bottom:18px;background:#fff;overflow:hidden;">
          <div style="display:flex;justify-content:space-between;align-items:center;padding:16px 18px 10px 18px;background:#f6f8ff;">
            <div style="font-weight:700;color:#23272f;">Order #${order.orderId}</div>
            <div style="display:flex;align-items:center;gap:16px;">
              <span style="font-size:.95rem;color:var(--muted);">${order.date}</span>
              <span class="order-status ${order.status.toLowerCase().replace(/ /g,'-')}" style="padding:4px 12px;border-radius:20px;font-size:0.85rem;font-weight:700;${order.status==='Completed'?'background:rgba(74,222,128,.2);color:#4ade80;':order.status==='To Ship'?'background:rgba(139,182,255,.2);color:#8bb6ff;':order.status==='To Receive'?'background:rgba(255,184,107,.2);color:#ffb86b;':order.status==='To Pay'?'background:rgba(255,107,107,.2);color:#ff6b6b;':'background:#e5e8f0;color:#23272f;'}">${order.status}</span>
            </div>
          </div>
          <div style="padding:0 18px;">
            ${order.items.map(item => `
              <div style="display:flex;align-items:center;gap:14px;padding:18px 0;border-bottom:1px solid #f0f0f0;">
                <img src="${item.img}" alt="${item.title}" style="width:64px;height:64px;border-radius:8px;object-fit:cover;border:1px solid #e5e8f0;">
                <div style="flex:1;">
                  <div style="font-weight:700;color:#23272f;font-size:1.05rem;">${item.title}</div>
                  ${item.variation ? `<div style="color:#5b6378;font-size:.95rem;">Variation: ${item.variation}</div>` : ''}
                  <div style="color:#5b6378;font-size:.95rem;">Qty: ${item.qty}</div>
                </div>
                <div style="font-weight:700;color:#23272f;">${item.price}</div>
              </div>
            `).join('')}
          </div>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:24px;padding:14px 18px 0 18px;">
            <div style="font-size:1.05rem;color:#23272f;">
              Order Total: <span style="font-weight:800;color:var(--accent-2);">
                ₱${order.items.reduce((sum, i) => sum + parseFloat(i.price.replace(/[₱,]/g,'')) * i.qty, 0).toLocaleString()}
              </span>
            </div>
          </div>
          <div style="display:flex;justify-content:flex-end;align-items:center;gap:10px;padding:14px 18px 18px 18px;">
            ${order.status === 'To Pay' ? `<button style="background:#ff6b6b;color:#fff;padding:7px 18px;border:none;border-radius:6px;font-weight:700;cursor:pointer;">Pay Now</button>` : ''}
            ${order.status === 'To Ship' ? `<button style="background:#8bb6ff;color:#fff;padding:7px 18px;border:none;border-radius:6px;font-weight:700;cursor:pointer;">Track</button>` : ''}
            ${order.status === 'To Receive' ? `<button style="background:#4ade80;color:#23272f;padding:7px 18px;border:none;border-radius:6px;font-weight:700;cursor:pointer;">Confirm Received</button>` : ''}
            <button style="background:#e5e8f0;color:#23272f;padding:7px 18px;border:none;border-radius:6px;font-weight:700;cursor:pointer;">View Details</button>
          </div>
        </div>
      `).join('');
    }
    document.querySelector('.nav-item[data-section="orders"]').addEventListener('click', renderOrders);
    // Filter button logic
    document.querySelector('.nav-item[data-section="orders"]').addEventListener('click', function() {
      renderOrders('All');
      // Reset filter button active state
      document.querySelectorAll('.order-filter-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelector('.order-filter-btn[data-status="All"]').classList.add('active');
    });
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('order-filter-btn')) {
        const status = e.target.getAttribute('data-status');
        renderOrders(status);
        document.querySelectorAll('.order-filter-btn').forEach(btn => btn.classList.remove('active'));
        e.target.classList.add('active');
      }
    });


   
    // --- CART LOGIC ---
    let cart = JSON.parse(localStorage.getItem('petopia_cart') || '{}');
    function saveCart() {
      localStorage.setItem('petopia_cart', JSON.stringify(cart));
    }
    function addToCart(id) {
      const products = getAllProducts();
      const prod = products.find(p => p.id === id);
      if (!prod) return;
      if (!cart[id]) {
        cart[id] = { product: prod, qty: 1, selected: true };
      } else {
        cart[id].qty += 1;
        cart[id].selected = true;
      }
      saveCart();
      updateCartBadge();
      renderCart();
      // Feedback for product card button
      if (event && event.target) {
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = 'Added!';
        button.style.background = '#4ade80';
        button.style.color = '#23272f';
        setTimeout(() => {
          button.textContent = originalText;
          button.style.background = '';
          button.style.color = '';
        }, 1000);
      }
    }
    function updateCartBadge() {
      // Bilang ng unique items sa cart, hindi total quantity
      const count = Object.keys(cart).length;
      const cartBadge = document.getElementById('cartBadge');
      cartBadge.textContent = count;
      cartBadge.style.display = count > 0 ? 'block' : 'none';
      cartBadge.style.transform = 'scale(1.2)';
      setTimeout(() => {
        cartBadge.style.transform = 'scale(1)';
      }, 200);
    }
    updateCartBadge();

    function renderCart() {
      const cartItems = document.getElementById('cartItems');
      const cartEmpty = document.getElementById('cartEmpty');
      const items = Object.values(cart);
      if (!items.length) {
        cartItems.innerHTML = '';
        cartEmpty.style.display = 'block';
        document.getElementById('cartTotal').textContent = '₱0';
        document.getElementById('selectAllCart').checked = false;
        return;
      }
      cartEmpty.style.display = 'none';
      let allSelected = items.every(item => item.selected);
      document.getElementById('selectAllCart').checked = allSelected;
      let html = '';
      items.forEach(({product, qty, selected}) => {
        html += `
          <div class="cart-row" style="display:flex;align-items:center;gap:14px;margin-bottom:18px;padding:10px 0;border-bottom:1px solid #e5e8f0;">
            <input type="checkbox" class="cart-select" data-id="${product.id}" ${selected ? 'checked' : ''} style="transform:scale(1.2);margin-right:8px;">
            <img src="${product.img}" alt="${product.title}" style="width:60px;height:60px;object-fit:cover;border-radius:12px;box-shadow:0 2px 8px #e5e8f0;">
            <div style="flex:1;">
              <div style="font-weight:700;color:#23272f;">${product.title}</div>
              <div style="color:var(--accent-2);font-weight:700;">${product.price}</div>
            </div>
            <div class="qty-group" style="display:flex;align-items:center;gap:0;background:#f6f8ff;border-radius:8px;box-shadow:0 2px 8px #f0f4ff;">
              <button type="button" class="qty-btn" data-id="${product.id}" data-action="minus" style="width:32px;height:32px;font-size:1.2rem;border:none;background:none;cursor:pointer;border-radius:8px 0 0 8px;color:#23272f;">-</button>
              <input type="number" min="1" class="cart-qty" data-id="${product.id}" value="${qty}" style="width:40px;text-align:center;border:none;background:transparent;font-size:1rem;font-weight:700;color:#23272f;">
              <button type="button" class="qty-btn" data-id="${product.id}" data-action="plus" style="width:32px;height:32px;font-size:1.2rem;border:none;background:none;cursor:pointer;border-radius:0 8px 8px 0;color:#23272f;">+</button>
            </div>
          </div>
        `;
      });
      cartItems.innerHTML = html;
      updateCartTotal();
    }
    function updateCartTotal() {
      let total = 0;
      Object.values(cart).forEach(({product, qty, selected}) => {
        if (selected) {
          let price = parseFloat(product.price.replace(/[^\d.]/g, '')) || 0;
          total += price * qty;
        }
      });
      document.getElementById('cartTotal').textContent = '₱' + total.toLocaleString();
    }
    document.getElementById('cartItems').addEventListener('change', function(e) {
      if (e.target.classList.contains('cart-qty')) {
        const id = e.target.dataset.id;
        let val = parseInt(e.target.value, 10);
        if (val < 1 || isNaN(val)) val = 1;
        cart[id].qty = val;
        saveCart();
        updateCartBadge();
        updateCartTotal();
      }
      if (e.target.classList.contains('cart-select')) {
        const id = e.target.dataset.id;
        cart[id].selected = e.target.checked;
        saveCart();
        renderCart();
      }
    });
    document.getElementById('cartItems').addEventListener('click', function(e) {
      if (e.target.classList.contains('qty-btn')) {
        const id = e.target.dataset.id;
        if (!cart[id]) return;
        if (e.target.dataset.action === 'plus') {
          cart[id].qty += 1;
        } else if (e.target.dataset.action === 'minus') {
          cart[id].qty = Math.max(1, cart[id].qty - 1);
        }
        saveCart();
        renderCart();
        updateCartBadge();
      }
    });
    document.getElementById('selectAllCart').addEventListener('change', function(e) {
      const checked = e.target.checked;
      Object.values(cart).forEach(item => item.selected = checked);
      saveCart();
      renderCart();
    });
    document.getElementById('checkoutBtn').addEventListener('click', function() {
      const selectedItems = Object.values(cart).filter(item => item.selected);
      if (!selectedItems.length) {
        alert('Please select at least one item to checkout.');
        return;
      }
      alert('Proceeding to checkout for ' + selectedItems.length + ' item(s).');
    });
    document.querySelector('.icon-btn[aria-label="Cart"]').addEventListener('click', function() {
      // Activate Cart nav
      document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
      const cartNav = document.querySelector('.nav-item[data-section="wishlist"]');
      if (cartNav) cartNav.classList.add('active');
      // Hide all sections, show Cart section
      document.querySelectorAll('.section-content').forEach(section => section.style.display = 'none');
      const cartSection = document.getElementById('wishlist-section');
      if (cartSection) cartSection.style.display = 'block';
      // Render cart content
      renderCart();
      // Hide delete button by default
      document.getElementById('deleteSelectedBtn').style.display = 'none';
      // Scroll to top of main content area, para kita ang "Your Cart" header
      const mainContent = document.querySelector('.content-area');
      if (mainContent) {
        mainContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });

    document.querySelector('.nav-item[data-section="wishlist"]').addEventListener('click', function() {
      renderCart();
      // Hide delete button by default
      document.getElementById('deleteSelectedBtn').style.display = 'none';
    });

    document.getElementById('deleteSelectedBtn').addEventListener('click', function() {
      const selectedIds = Object.keys(cart).filter(id => cart[id].selected);
      if (!selectedIds.length) return;
      selectedIds.forEach(id => { delete cart[id]; });
      saveCart();
      updateCartBadge();
      renderCart();
    });
    document.getElementById('editCartBtn').addEventListener('click', function() {
      const delBtn = document.getElementById('deleteSelectedBtn');
      delBtn.style.display = delBtn.style.display === 'none' ? 'inline-block' : 'none';
    });
    window.addToCart = addToCart;
  </script>
</body>
</html>
